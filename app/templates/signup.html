{% extends "base.html" %}
{% load static %}

{% block title %}DirectFarm | Sign Up{% endblock title %}
{% block main_content %}
<section class="flex flex-col gap-4 py-6 w-full">
  <div class="py-6">
    <div class="container mx-auto text-center">
      <h1 class="text-3xl font-bold">Create an Account</h1>
      <p class="mt-2">Sign up to start shopping for fresh, sustainable produce directly from local farmers!</p>
    </div>
  </div>
  <div class="py-10">
    <div class="container mx-auto w-2/3">
      <form id="signup-form" action="/signup/" method="POST" class="space-y-4 bg-white p-6 border rounded-lg shadow-md">
        {% csrf_token %}
        <!-- Username, First Name, Last Name -->
        <div class="flex gap-4">
          <div class="w-1/3">
            <label for="username" class="block text-gray-700 font-semibold">Username</label>
            <input type="text" id="username" name="username" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your username">
          </div>
          <div class="w-1/3">
            <label for="first_name" class="block text-gray-700 font-semibold">First Name</label>
            <input type="text" id="first_name" name="first_name" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your first name">
          </div>
          <div class="w-1/3">
            <label for="last_name" class="block text-gray-700 font-semibold">Last Name</label>
            <input type="text" id="last_name" name="last_name" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your last name">
          </div>
        </div>

        <!-- Account Type, Gender, Date of Birth -->
        <div class="flex gap-4">
          <div class="w-1/3">
            <label for="user_type" class="block text-gray-700 font-semibold">Account Type</label>
            <select id="user_type" name="user_type" required class="w-full border border-gray-300 rounded-lg p-2 mt-1">
              <option value="Customer">Customer</option>
              <option value="Farmer">Farmer</option>
            </select>
          </div>
          <div class="w-1/3">
            <label for="gender" class="block text-gray-700 font-semibold">Gender</label>
            <select id="gender" name="gender" required class="w-full border border-gray-300 rounded-lg p-2 mt-1">
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="w-1/3">
            <label for="dob" class="block text-gray-700 font-semibold">Date of Birth</label>
            <input type="date" id="dob" name="dob" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="YYYY-MM-DD">
          </div>
        </div>

        <!-- Email, Phone, Address -->
        <div class="flex gap-4">
          <div class="w-1/3">
            <label for="email" class="block text-gray-700 font-semibold">Email Address</label>
            <input type="email" id="email" name="email" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your email address">
          </div>
          <div class="w-1/3">
            <label for="phone" class="block text-gray-700 font-semibold">Phone Number</label>
            <input type="text" id="phone" name="phone" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your phone number">
          </div>
          <div class="w-1/3">
            <label for="address" class="block text-gray-700 font-semibold">Address</label>
            <input type="text" id="address" name="address" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your address">
          </div>
        </div>

        <div class="w-full flex gap-4">
          <!-- Location -->
          <div class="flex-1">
            <label for="location" class="block text-gray-700 font-semibold">Location</label>
            <input type="text" id="location" name="location" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your location">
          </div>
          <div class="flex-1">
            <label for="profile-picture" class="block text-gray-700 font-semibold">Profile picture</label>
            <input type="file" id="profile-picture" name="profile-picture" class="w-full border border-gray-300 rounded-lg p-2 mt-1">
          </div>
        </div>

        <!-- Password, Confirm Password -->
        <div class="w-full flex gap-4">
          <div class="flex-1">
            <label for="password" class="block text-gray-700 font-semibold">Password</label>
            <input type="password" id="password" name="password" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter a secure password">
          </div>
          <div class="flex-1">
            <label for="confirm_password" class="block text-gray-700 font-semibold">Confirm Password</label>
            <input type="password" id="confirm_password" name="confirm_password" required class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Confirm your password">
          </div>
        </div>

        <!-- Password Mismatch Warning -->
        <div id="password-warning" class="text-red-500 text-sm" style="display: none;">
          Passwords do not match.
        </div>

        <!-- Farm Name (Optional) -->
        <div id="farm_name_field" style="display: none;">
          <label for="farm_name" class="block text-gray-700 font-semibold">Farm Name</label>
          <input type="text" id="farm_name" name="farm_name" class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your farm name (optional)">
        </div>

        <!-- Farm Description (Optional) -->
        <div id="farm_description_field" style="display: none;">
          <label for="farm_description" class="block text-gray-700 font-semibold">Farm Description</label>
          <textarea id="farm_description" name="farm_description" class="w-full border border-gray-300 rounded-lg p-2 mt-1" placeholder="Enter your farm description (optional)"></textarea>
        </div>

        <!-- Submit Button -->
        <div>
          <button type="submit" class="w-full py-2 px-4 rounded-lg font-semibold bg-primary text-white hover:bg-dark">Create Account</button>
        </div>

        <!-- Already have an account? -->
        <div class="text-center">
          <p class="text-sm text-gray-600">Already have an account? <a href="{% url "login" %}" class="font-bold text-primary hover:underline">Login here</a></p>
        </div>
      </form>
    </div>
  </div>
  <div class="text-center">
    <div class="container mx-auto">
      <p class="text-sm text-gray-600">Or sign up with</p>
      <div class="flex justify-center gap-4 mt-4">
        <!-- Google Sign-Up -->
        <button class="border border-primary py-2 px-4 rounded-lg flex items-center gap-2">
          <i class="fa-brands fa-google"></i>
          Google
        </button>

        <!-- Facebook Sign-Up -->
        <button class="border border-primary py-2 px-4 rounded-lg flex items-center gap-2">
          <i class="fa-brands fa-facebook"></i>
          Facebook
        </button>
      </div>
    </div>
  </div>
</section>

<script>
  document.getElementById('user_type').addEventListener('change', function() {
    var userType = this.value;
    var farmNameField = document.getElementById('farm_name_field');
    var farmDescriptionField = document.getElementById('farm_description_field');
    if (userType === 'Farmer') {
      farmNameField.style.display = 'block';
      farmDescriptionField.style.display = 'block';
    } else {
      farmNameField.style.display = 'none';
      farmDescriptionField.style.display = 'none';
    }
  });

  document.getElementById('signup-form').addEventListener('submit', function(event) {
    var password = document.getElementById('password').value;
    var confirmPassword = document.getElementById('confirm_password').value;
    var passwordWarning = document.getElementById('password-warning');
    if (password !== confirmPassword) {
      event.preventDefault();
      passwordWarning.style.display = 'block';
    } else {
      passwordWarning.style.display = 'none';
    }
  });
</script>

{% endblock main_content %}